# hyperland

>hyperland
<https://www.vindo.cn/blog/hyprland-arch-linux>
<https://lixuannan.github.io/posts/34336.html>
<https://cascade.moe/posts/hyprland-configure/>

参考dotfiles config
<https://github.com/kmephistoh/dotfiles/tree/main/config>
<https://github.com/Isoheptane/dotfiles/tree/blog-example>
<https://github.com/theniceboy/.config/tree/master>
<https://github.com/Fireond/dotfiles/tree/main>

## Hyprland

```zsh
sudo pacman -S hyperland
mkdir -p ~/.config/hypr/
nano ~/.config/hypr/hyprland.conf
autogenerated = 1 # 移除初始警告
exec-once hyprpaper
```

## polkit-kde-agent: 图形化权限验证代理

磁盘挂载：当用户尝试挂载外部存储设备时，系统会通过 Polkit-KDE-Agent 请求用户输入密码。

网络管理：在使用 NetworkManager 切换 Wi-Fi 或移动网络时，可能需要通过 Polkit 进行权限验证。

系统操作：如关机、重启、挂起等操作，尤其是在多用户环境中。

```zsh
sudo pacman -S polkit-kde-agent
```

## wofi: 轻量高效的程序启动器。为 Wayland 原生设计的，兼容性更好

```zsh
sudo pacman -S wofi
nano ~/.config/wofi/config
```

```json
show=drun
width=900
height=600
always_parse_args=true
show_all=false
insensitive=true
allow_images=true
normal_window=true
allow_markup=true
prompt= 👍launcher mode🤔
```

```zsh
nano ~/.config/wofi/style.css
```

```css
/* Macchiato Rosewater */
@define-color accent #f4dbd6;
@define-color txt #cad3f5;
@define-color bg #24273a;
@define-color bg2 #494d64;

 * {
    font-family: 'JetBrains Mono Nerd Font', monospace;
    font-size: 14px;
 }

 /* Window */
 window {
    margin: 0px;
    padding: 10px;
    /* border: 3px solid @accent; */
    /* border-radius: 7px; */
    background-color: @bg;
    animation: slideIn 0.5s ease-in-out both;
 }

 /* Slide In */
 @keyframes slideIn {
    0% {
       opacity: 0;
    }

    100% {
       opacity: 1;
    }
 }

 /* Inner Box */
 #inner-box {
    margin: 5px;
    padding: 10px;
    border: none;
    background-color: @bg;
    animation: fadeIn 0.5s ease-in-out both;
 }

 /* Fade In */
 @keyframes fadeIn {
    0% {
       opacity: 0;
    }

    100% {
       opacity: 1;
    }
 }

 /* Outer Box */
 #outer-box {
    margin: 5px;
    padding: 10px;
    border: none;
    background-color: @bg;
 }

 /* Scroll */
 #scroll {
    margin: 0px;
    padding: 10px;
    border: none;
 }

 /* Input */
 #input {
    margin: 5px;
    padding: 10px;
    border: none;
    color: @accent;
    background-color: @bg2;
    animation: fadeIn 0.5s ease-in-out both;
 }

 /* Text */
 #text {
    margin: 5px;
    padding: 10px;
    border: none;
    color: @txt;
    animation: fadeIn 0.5s ease-in-out both;
 }

 /* Selected Entry */
 #entry:selected {
   background-color: @accent;
 }

 #entry:selected #text {
    color: @bg;
 }
```

## mako: Wayland 通知守护程序

```zsh
sudo pacman -S mako
nano ~/.config/mako/config # 先创建配置文件，下面是我的配置，复制注意去掉注释
sort=-time # 按时间排序
layer=overlay # 通知层叠在窗口之上
background-color=#2e34407f # 背景颜色
width=350
height=120
border-size=3
border-color=#99c0d0
border-radius=12
icons=1 # 显示图标
max-icon-size=64
default-timeout=5000
ignore-timeout=0
font="Noto Sans CJK SC" 11
margin=12
padding=12,20
[urgency=low]
border-color=#cccccc
[urgency=normal]
border-color=#99c0d0
[urgency=critical]
border-color=#bf616a
default-timeout=0

makoctl reload # 重载配置文件
notify-send 'Hello world!' 'This is an example notification.' -u normal # 测试
```

## hyprpaper

```zsh
sudo pacman -S hyprpaper
hyprctl monitors # 运行以下命令以获取显示器名称
nano ~/.config/hypr/hyprpaper.conf # 创建配置文件
preload = <壁纸路径> # 预加载壁纸
# wallpaper = <显示器名称>, <壁纸路径>
wallpaper = Virtual-1, /home/xxx/Pictures/wallpaper.png
```

## kitty hyperland默认的终端模拟器

```zsh
sudo pacman -S kitty
kitty +kitten themes # 选择主题
Catppuccin-Mocha # 我选择这个，根据引导配置，按M修改配置文件，配置文件在~/.config/kitty/kitty.conf 没有就新建
# 快捷键 ctrl+shift+F5 立即应用配置文件
```

> 以下是我的配置文件

```zsh
# 使用 Catppuccin-Mocha 深色主题
# BEGIN_KITTY_THEME
# Catppuccin-Mocha
include current-theme.conf
# END_KITTY_THEME

# ========================
# 字体设置部分
# ========================
font_size 11.0
font_family JetBrainsMono Nerd Font Mono  
bold_font auto
italic_font auto
bold_italic_font auto

# 只在光标位置禁用连字（避免光标错位）
disable_ligatures cursor  
# 连字示例：!=显示为≠，->显示为→，但光标处保持原样

# ========================
# 窗口外观设置
# ========================
# 只显示标题栏，隐藏其他窗口装饰
hide_window_decorations titlebar-only
# 内容距离窗口边缘的内边距
window_padding_width 15
# 背景透明度（0=全透明，1=不透明）
background_opacity 0.8
# 动态调整透明度（窗口失焦时更透明）
dynamic_background_opacity yes
# 背景模糊程度20
background_blur 20

# 记住上次关闭时的窗口大小
remember_window_size yes
# 初始窗口
initial_window_width 1000 
initial_window_height 600

# ========================
# 选中即复制功能
# ========================
# 启用选中文本自动复制
copy_on_select yes
# 复制到系统剪贴板
copy_on_select clipboard
# 粘贴大文本时需确认（防止误操作）
paste_actions confirm-if-large
# 完整剪贴板控制：可读写系统和选择缓冲区
clipboard_control write-clipboard write-primary read-clipboard read-primary


# ========================
# 标签栏增强设置
# ========================
# 标签栏位于窗口顶部
tab_bar_edge top
# 使用Powerline风格
tab_bar_style powerline
# Powerline样式为斜角（45度角更美观）
tab_powerline_style slanted
# 标签标题只显示程序名
tab_title_template "{title}"
# 当前活动标签显示：通知图标+活动指示+[序号:标题]
active_tab_title_template "{bell}{activity}[{index}: {title}]"

# ========================
# 性能优化设置
# ========================
# 重绘延迟10毫秒（平衡流畅度和性能）
repaint_delay 10  
# 输入延迟2毫秒（键盘响应速度）
input_delay 2
# 与显示器刷新率同步（减少撕裂）
sync_to_monitor yes
# 保留10000行历史记录（可滚动查看）
scrollback_lines 10000

# ========================
# 实用快捷键设置
# ========================
# 新建标签页
map ctrl+shift+t new_tab
# 关闭当前标签页
map ctrl+shift+w close_tab
# 下一个标签
map ctrl+shift+] next_tab
# 上一个标签
map ctrl+shift+[ previous_tab
# 新建窗口
map ctrl+shift+enter new_window
# 切换到下一个 Kitty 窗口
map ctrl+shift+j next_window
# 切换到上一个 Kitty 窗口
map ctrl+shift+k previous_window
# 字体放大
map ctrl+shift+equal change_font_size all +2.0
# 字体缩小
map ctrl+shift+minus change_font_size all -2.0

# ========================
# URL和鼠标行为
# ========================
# 自动检测并高亮显示URL链接
detect_urls yes
# URL显示样式为花括号包围
url_style curly
# 使用默认浏览器打开链接
open_url_with default
# 设置文件路径的打开行为
url_prefixes file ftp ftps http https
# 自定义文件路径点击行为
map ctrl+click open_url_with default
```

## waybar 状态栏

<https://lixuannan.github.io/posts/42208.html>
<https://github.com/Alexays/Waybar/wiki/Module:-Custom>

```zsh
sudo pacman -S waybar
nano ~/.config/hypr/hyprland.conf
exec-once waybar # 添加

nano ~/.config/waybar/config # 修改配置文件
```

```json
{
    "layer": "top",
    "position": "top", 
    "height": 40, 
    "spacing": 6,
    "modules-left": ["custom/appmenu", "wlr/taskbar"],
    "modules-center": ["wlr/workspaces","clock", "hyprland/window"],
    "modules-right": ["tray", "network", "pulseaudio", "memory", "cpu"],
    "custom/appmenu": {
         "format": "Menu {icon}",
         "format-icon": "󰻀",
         "rotate": 0,
         "on-click": "~/.config/waybar/runwofi.sh"
    },
    "wlr/taskbar": {
         "format": "{icon}",
         "tooltip": true,
         "tooltip-format": "{title}",
         "on-click": "activate",
         "on-click-middle": "close",
         "active-first": true
    },
    "wlr/workspaces": {
        "format": "{icon}",
        "sort-by-number": true,
        "on-click": "activate",
        "on-scroll-up": "hyprctl dispatch workspace e+1",
        "on-scroll-down": "hyprctl dispatch workspace e-1"
    },
    "hyprland/window": {
        "format": "\uf061 {}",
        "separate-outputs": true
    },
    "tray": {
        "icon-size": 21,
        "spacing": 10
    },
    "clock": {
        "interval": 1,
        "format": "\uf017 {:%H:%M:%S}",
        "format-alt": "\uf133 {:%Y-%m-%d %H:%M:%S}"
    },
    "cpu": {
        "interval": 1,
        "format": " {usage}%",
        "tooltip": false
    },
    "memory": {
        "interval": 1,
        "format": " {used}G",
        "tooltip": false
    },
    "network": {
        "interval": 1,
        "format-wifi": " {essid} ({signalStrength}%)",
        "format-ethernet": "\uf796 {bandwidthUpBits} {bandwidthDownBits}",
        "format-linked": " {ifname} (No IP)",
        "format-disconnected": "⚠ Disconnected",
        "tooltip-format": " {ifname} {ipaddr}/{cidr} via {gwaddr}",
        "format-alt": "{ifname}: {ipaddr}/{cidr}"
    },
    "pulseaudio": {
        "scroll-step": 5,
        "format": "{icon} {volume}%",
        "format-muted": "",
        "format-bluetooth": "{icon} {volume}%",
        "format-bluetooth-muted": " {icon}",
        "format-icons": {
            "headphone": "",
            "hands-free": "",
            "headset": "",
            "phone": "",
            "portable": "",
            "car": "",
            "default": ["", "", ""]
        },
        "on-click-right": "pavucontrol"
    }
}
```

```zsh
nano runwofi.sh
#!/bin/bash
wofi --show drun
chmod +x ~/.config/waybar/runwofi.sh

nano ~/.config/waybar/style.css
```

```css
* {
    /* `otf-font-awesome` is required to be installed for icons */
    font-family: "Fira Mono";
    font-weight: 500;
    font-size: 18px;

    border-radius: 10px;
    text-shadow: none;
    
    transition-property: background;
    transition-duration: 0.2s;
}
window#waybar {
    background-color: transparent;
}
window#waybar.hidden {
    opacity: 0.2;
}

#workspaces {
 margin-top: 6px;
 background: rgba(16, 20, 24, 0.5);
 transition: none;

    font-size: 12px;
}

#workspaces button {
    border: none;
    padding: 0 10px;
    background-color: transparent;
    color: #ffffff;
}

#workspaces button:hover {
    background: rgba(255, 255, 255, 0.5);
}

#workspaces button.active {
    background: #fff9bb;
    color: #000000;
}

#workspaces button.active:hover {
    background: #fffcdf;
}

#workspaces button.urgent {
    background-color: #eb4d4b;
}

#mode {
    background-color: #64727D;
    border-bottom: 3px solid #ffffff;
}

#clock,
#cpu,
#memory,
#network,
#pulseaudio,
#tray,
#mode,
#window {
    margin-top: 6px;
    padding: 0 12px;
    color: #ffffff;
}

/* If workspaces is the leftmost module, omit left margin */
.modules-left > widget:first-child > * {
    margin-left: 16px;
}

/* If workspaces is the rightmost module, omit right margin */
.modules-right > widget:last-child > * {
    margin-right: 16px;
}

#clock {
    background-color: #eefff1;
    color: #000000;
}

#cpu {
    background-color: #FE968B;
    color: #000000;
}

#memory {
    background-color: #FFEAAA;
    color: #000000;
}

#pulseaudio {
    background-color: #b0f5e5;
    color: #000000;
}

#network {
    background-color: #87ddff;
    color: #000000;
}

#tray {
    background-color: rgba(16, 20, 24, 0.5);
}

#window {
    font-family: 'Fira Mono', 'Noto Sans CJK SC', sans-serif;
    font-weight: 400;
    background-color: #cbecff;
    color: #000000;
}
```
